---
  - name: create vm from template
    hosts: localhost
    #connection: local
    #gather_facts: no
    become: false
    vars:
      datastore: DATASTORE03

    tasks:
     - name: Gather cluster info from given datacenter
       vmware_cluster_info:
        hostname: 10.2.250.110
        username: labtest1@vsphere.local
        password: Labtest@@2022
        datacenter: HPE-LAB-DC 
        validate_certs: no
       delegate_to: localhost
       register: cluster_info

     - debug:
        #var: cluster_facts["datastores"][1].name
        var: cluster_info

     - name: Gather cluster info from given datacenter
       vmware_cluster_info:
        hostname: 10.2.250.110
        username: labtest1@vsphere.local
        password: Labtest@@2022
        cluster_name: HPE-LAB-CLUS
        validate_certs: no
       delegate_to: localhost
       register: cluster_info_1

     - debug:
        #var: cluster_facts["datastores"][1].name
        var: cluster_info_1

     - name: Gather info from standalone ESXi server having datacenter as 'ha-datacenter'
       vmware_datastore_info:
        hostname: 10.2.250.110
        username: labtest1@vsphere.local
        password: Labtest@@2022
        datacenter_name: HPE-LAB-DC
        validate_certs: no
       delegate_to: localhost
       register: info

     - debug:
        #var: cluster_facts["datastores"][1].name
        #var: info["datastores"][1].freeSpace
        var: info



