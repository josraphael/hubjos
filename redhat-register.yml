---
- name: subscription-manager
  hosts: all
  become: true
  vars:
    subscription_username: "admin"
    subscription_password: "start98!"
  tasks:
    - name: register with subscription-manager
      redhat_subscription:  
        state: present
        username: "{{ subscription_username }}"
        password: "{{ subscription_password }}"
        auto_attach: true

    - name: Register and subscribe to multiple pools.
      redhat_subscription:
        state: present
        username: "{{ subscription_username }}"
        password: "{{ subscription_password }}"
        pool_ids:
          - 8a827a2e80c41d1a0180c42680d20010

